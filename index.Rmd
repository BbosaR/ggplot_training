---
title: "DATA VISUALIZATION TRAINING with R"
subtitle: "<br/>ggplot2"
author: "UI-LISA Collaborators"
institute: "Laboratory for Interdisciplinary Statistical Analysis(UI-LISA), Department of Statistics,University of Ibadan"
date: "2016/12/12 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    css: ["default", "chocolate", "rladies-fonts"]
    lib_dir: libs
    seal: false
    nature:
      beforeInit: "cols_macro.js"
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---



```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE,	
                      warning = FALSE,
                      eval = TRUE,
                      tidy = FALSE)
library(knitr)

```

class: inverse, center

<div style="text-align: left">
<img style="float: center; margin: 0px 15px 15px 0px;" src="picture/UI.png" width="80" height="100"/>
</div>


## Data Visualization Training (ggplot2)

#### UI LISA<br> Materials: https://fomotis.github.io/ggplot_training/

<div style="text-align: right">
<img style="float: center; margin: 0px 15px 15px 0px;" src="picture/UI_LISA.jpg" width="80" height="100"/>
</div>


---
class: center, middle

# Week one

`Assumptions` <br>

`Grammar of graphics` <br>

`Enters ggplot2` <br>

`Why the fuss about ggplot2?` <br>

<br>
<br>

.pull-right[
`Olusoji & Olubusoye`
]

---

# Assumptions

1. You have access to internet `r emo::ji("heavy_check_mark")`

2. You have some experience working with `R` `r emo::ji("question")`

3. You like cool graphics `r emo::ji("smile")`


## Desirable but not necessary

1. You have some experience with `tidyverse` and `piping(%>%)` `r emo::ji("+1")`


#### `r emo::ji("cross mark")` assumption 2  `r emo::ji("right arrow")` crash course in `R` and `tidyverse`

#### `r emo::ji("heavy_check_mark")` assumption 2  `r emo::ji("right arrow")` Grammar of graphics

---

# Crash course in `tidyverse`

.pull-left[
<img style="float: center; margin: 0px 0px 0px 0px;" src="picture/Rlogo.png" height="60" width="60" height="50"/>

* free open source statistical software `r emo::ji("thumbsup")`
* integrate easily with other languages (`Python`, `C++`) `r emo::ji("thumbsup")`
* fantastic community `r emo::ji("thumbsup")`
* awesome ecosystem of packages `r emo::ji("thumbsup")`
]


.pull-right[
<img style="float: center; margin: 0px 0px 0px 0px;" src="picture/tidyverse.png" height="60" width="60" height="50"/>

* an opinionated collection of packages designed for data science
* `broom`, `dplyr`, `forcats`, `ggplot2`, `purrr`, `readr`, `stringr`, `tibble`, `tidyr`
8 `broom` provides tools for tidymodels
* `dplyr` provides a set of functions for common data manipulation problems.
* `tidyr` provides a set of functions to go from messy data to tidy data.
* `purrr` provides tools for functional programming. *"You don't always have to write those loops"*

[www.tidyverse.org](https://www.tidyverse.org/packages/)
]

---

# Pipe

* ceci n'est pas un pipe `%>%` 

* It allows you to chain several `R` commands together `r emo::ji("smile")`

* The idea is to  have `R` codes as `x %>% f` rather than `f(x)`. This is an old concept in Linux and Unix systems.

* There are other pipe operators (`%T>%`, `%$%`, `%<>%`) in `magrittr`

* Read more [here](https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html)

---

# `Tidyverse` in action (`selecting`)

```{r chk1}
library(tidyverse)
naija_covid <- read_delim("Data/nigeria_covid-19_subnational.csv", delim = ";")
naija_covid %>% select(c(1, 5, 7:9)) -> naija_covid
DT::datatable(head(naija_covid), class = 'cell-border stripe', rownames = FALSE)
```

* variants: `select_if()`, `select_at()`, `select_var()`.

---

# `Tidyverse` in action (`renaming`)

```{r chk2}
naija_covid %>% rename(Date = DATE, States = REGION, Cases = `Contaminés`, Deaths = `Décès`, Recovered = `Guéris`) -> naija_covid
DT::datatable(head(naija_covid), class = 'cell-border stripe', rownames = FALSE)
```

* variants: `rename_if()`, `rename_at()`, `rename_all()`

---

# `Tidyverse` in action (`mutate`)

```{r chk3}
naija_covid <- naija_covid %>% mutate_at(c("Cases", "Deaths", "Recovered"), as.numeric)
DT::datatable(head(naija_covid), class = 'cell-border stripe', rownames = FALSE)
```

* variants: `mutate_if()`, `mutate_at()`, `mutate_all()`

---

# `groups and summaries`

```{r chk4}
total_cases <- naija_covid %>% group_by(States) %>% summarise(Total_Cases = sum(Cases, na.rm = TRUE)) %>% 
  arrange(desc(Total_Cases))
DT::datatable(head(total_cases), class = 'cell-border stripe', rownames = FALSE)
```

* `summairse_at()`, `summarise_if()`, `summarise_all()`, `summarise_each()`



---

# Notes

* The slides above do not describe a tip of the iceberg when it comes to tidyverse
* Should you run into any problem, just Google the error message you get from `R`
* Twitter is also a fun place to learn these days
* Follow [#tidytuesday](https://twitter.com/search?q=%23TidyTuesday&src=typeahead_click) and [@tidyversetweets](https://twitter.com/tidyversetweets) for some cool visualizations and tidyverse tricks
* Check [https://www.tidyverse.org/learn/](https://www.tidyverse.org/learn/) for free resources on tidyverse


---

# Grammar of graphics

.pull-left[
<img src="picture/Hadley-wickham.jpg" width="200" height="300">
]

.pull-right[

* Term coined by `Leland Wilkinson` expanded to layered grammar of graphics by `Hadley Wickham`.

* *"A grammar of graphics is a tool that enables us to concisely describe the components of a graphic. Such a grammar allows us to move beyond named graphics and gain insight into the deep structure that underlies statistical graphics"*.

* The concept is essentially a set of rules that allows us to think of a statistical graphic beyond a certain name and format. 
]

---

# Grammar of graphics 2

* With this tool, you don't have to think about a scatter or box plot, but what set of information should I put on this graph to convey the message I want. 

* A plot is any name you give it. While the elements of the plots are merely verbs.

* Hence, you can have a boxplot with scatter points on it if you so desire. Actually, that exists `r emo::ji("smile")`

.footnote[http://dx.doi.org/10.1198/jcgs.2009.07098]

---

# Enters GGplot2


# Why the Fuss about ggplot2

---
class: center, middle

# Week two

`Basic ggplot2 functions (ggplot and qplot)` <br>

`Basic plots with ggplot2` <br>

---

# Basic ggplot2 functions

---

# Aesthetics

---

# Basic plots with ggplot2

---
class: center, middle

# Week three

`Legends and Themes customization` <br>

---

# Themes

---

# Available Themes

---

# Customising Themes


---
class: center, middle

# Week four

---

# Week four topic one

---

# Week four topic two

---

# Week four topic three

---
class: center, middle

# Week five

---

# Week five topic one

---

# Week five topic two

---

# Week five topic three



---
class: center, middle

# Week six

---

# Week six topic one

---

# Week six topic two

---

# Week six topic three










